<template>
    <!-- Login Page -->
    <template if:false={isAuthenticated}>
        <div class="auth-bg auth-bg-custom">
            <!-- Start Content -->
            <div class="container-fluid">
                <div class="row justify-content-center align-items-center">
                    <div class="col-lg-4">
                        <form onsubmit={handleLogin}>
                            <div class="card shadow-md rounded-3">
                                <div class="card-body">
                                    <!-- Logo -->
                                    <div class="text-center mb-4">
                                        <img src={logoUrl} alt="OptionMatrix Logo" class="logo-img">
                                    </div>

                                    <!-- Error Message -->
                                    <template if:true={errorMessage}>
                                        <p class="text-danger text-center mb-3">{errorMessage}</p>
                                    </template>

                                    <!-- Username Input 
                                     -->
                                    <div class="mb-3">
                                        <label class="form-label">Username</label>
                                        <div class="input-group">
                                            <span class="input-group-text border-end-0 bg-white">
                                                <svg class="icon-mail" xmlns="http://www.w3.org/2000/svg" width="16"
                                                    height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                    <rect x="3" y="5" width="18" height="14" rx="2" ry="2"></rect>
                                                    <polyline points="3 7 12 13 21 7"></polyline>
                                                </svg>
                                            </span>
                                            <input type="text" value={username} onchange={handleUsernameChange}
                                                name="username" class="form-control border-start-0 ps-2"
                                                placeholder="Enter Username" required />
                                        </div>
                                    </div>

                                    <!-- Password -->
                                    <div class="mb-3">
                                        <label class="form-label">Password</label>
                                        <div class="position-relative">
                                            <div class="pass-group input-group position-relative border rounded">
                                                <span class="input-group-text bg-white border-0">
                                                    <svg class="icon-lock" xmlns="http://www.w3.org/2000/svg" width="16"
                                                        height="16" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round">
                                                        <rect x="5" y="11" width="14" height="10" rx="2" ry="2"></rect>
                                                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                                    </svg>
                                                </span>
                                                <input type={passwordInputType} value={password}
                                                    onchange={handlePasswordChange} name="password"
                                                    class="pass-input form-control ps-2 border-0"
                                                    placeholder="****************" required />
                                                <span class="input-group-text border-0 toggle-password-wrapper"
                                                    onclick={togglePassword}>
                                                    <template if:true={passwordClass}>
                                                        <svg class="icon-eye" xmlns="http://www.w3.org/2000/svg"
                                                            width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                            stroke="currentColor" stroke-width="2"
                                                            stroke-linecap="round" stroke-linejoin="round">
                                                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z">
                                                            </path>
                                                            <circle cx="12" cy="12" r="3"></circle>
                                                        </svg>
                                                    </template>
                                                    <template if:false={passwordClass}>
                                                        <svg class="icon-eye-off" xmlns="http://www.w3.org/2000/svg"
                                                            width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                            stroke="currentColor" stroke-width="2"
                                                            stroke-linecap="round" stroke-linejoin="round">
                                                            <path
                                                                d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24">
                                                            </path>
                                                            <line x1="1" y1="1" x2="23" y2="23"></line>
                                                        </svg>
                                                    </template>
                                                </span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Remember & Forgot Password -->
                                    <div class="d-flex align-items-center justify-content-between mb-3">
                                        <div class="d-flex align-items-center">
                                            <label class="remember-me-wrapper">
                                                <input class="form-check-input" id="remember_me" type="checkbox"
                                                    checked={rememberMe} onchange={handleRememberMeChange} />
                                                <span class="form-check-label">Remember Me</span>
                                            </label>
                                        </div>
                                        <div class="text-end">
                                            <a class="text-danger forgot-link" href="javascript:void(0);">Forgot
                                                Password?</a>
                                        </div>
                                    </div>

                                    <!-- Login Button -->
                                    <div class="mb-2">
                                        <button type="submit" class="btn custom-button text-white w-100">Login</button>
                                    </div>
                                </div>
                            </div><!-- end card -->
                        </form>
                    </div><!-- end col -->
                </div><!-- end row -->
            </div><!-- end container -->
        </div>
    </template>

    <!-- Dashboard -->
    <template if:true={isAuthenticated}>
        <div class="dx-dashboard">
            <!-- Header -->
            <header class="dashboard-header">
                <div class="header-left">
                    <img src={logoUrl} alt="OptionMatrix Logo" class="dashboard-logo">
                    <h2 class="dashboard-title">{dashboardTitle}</h2>
                </div>
                <div class="header-right">
                    <span class="user-display">{userDisplayName}</span>
                    <button class="btn btn-logout" onclick={handleLogout}>Logout</button>
                </div>
            </header>

            <!-- Navigation -->
            <nav class="dashboard-nav">
                <ul class="nav-list">
                    <template for:each={navigationItems} for:item="navItem">
                        <li key={navItem.id} class={navItem.class} data-page={navItem.id} onclick={handleNavClick}>
                            <a href="javascript:void(0);">
                                <span class="nav-icon">{navItem.icon}</span>
                                <span class="nav-label">{navItem.label}</span>
                            </a>
                        </li>
                    </template>
                </ul>
            </nav>

            <!-- Content Area -->
            <main class="dashboard-content">
                <!-- ========== Health System LWC Components ========== -->
                <template if:true={showHsProjects}>
                    <c-hs-projects></c-hs-projects>
                </template>

                <template if:true={showHsPossibilities}>
                    <c-hs-possibilities></c-hs-possibilities>
                </template>

                <template if:true={showHsProfile}>
                    <c-hs-profile></c-hs-profile>
                </template>

                <template if:true={showHsQualifications}>
                    <c-hs-qualifications></c-hs-qualifications>
                </template>

                <template if:true={showHsMessages}>
                    <c-hs-messages></c-hs-messages>
                </template>

                <template if:true={showHsAgreements}>
                    <c-hs-agreements></c-hs-agreements>
                </template>

                <template if:true={showHsNotes}>
                    <c-hs-notes></c-hs-notes>
                </template>

                <!-- ========== Sponsor LWC Components ========== -->
                <template if:true={showSponsorProjectsComponent}>
                    <c-sponsor-projects></c-sponsor-projects>
                </template>

                <template if:true={showSponsorEnquiries}>
                    <c-sponsor-enquiries></c-sponsor-enquiries>
                </template>

                <template if:true={showSponsorProfile}>
                    <c-sponsor-profile></c-sponsor-profile>
                </template>

                <template if:true={showSponsorRequirements}>
                    <c-sponsor-requirements></c-sponsor-requirements>
                </template>

                <template if:true={showSponsorMessages}>
                    <c-sponsor-messages></c-sponsor-messages>
                </template>

                <template if:true={showSponsorAgreements}>
                    <c-sponsor-agreements></c-sponsor-agreements>
                </template>

                <template if:true={showSponsorNotes}>
                    <c-sponsor-notes></c-sponsor-notes>
                </template>
            </main>
        </div>
    </template>
</template>